'use client'

import { useRouter } from 'next/navigation'
import dynamic from 'next/dynamic'
import { FeatureCollection } from 'geojson'

const IrelandMap = dynamic(() => import('@/components/IrelandMap'), { ssr: false })

const irelandGeoJson: FeatureCollection = {
  type: 'FeatureCollection',
  features: [
    {
      type: 'Feature',
      properties: { name: 'Dublin' },
      geometry: {
        type: 'Polygon',
        coordinates: [[
            [
              -6.2105334685298885,
              53.634508452370454
            ],
            [
              -6.2395141934818525,
              53.634496739905956
            ],
            [
              -6.270249620216873,
              53.59813591267164
            ],
            [
              -6.345648358335893,
              53.5813165170992
            ],
            [
              -6.386443611780891,
              53.590398419018356
            ],
            [
              -6.430624099446646,
              53.552386782850846
            ],
            [
              -6.335998276464579,
              53.4903156223092
            ],
            [
              -6.35390177204053,
              53.44906931607599
            ],
            [
              -6.4085673508013485,
              53.43980381089685
            ],
            [
              -6.495339433560275,
              53.35070478586124
            ],
            [
              -6.4890435118173,
              53.33505166737302
            ],
            [
              -6.500866981296895,
              53.3213695263552
            ],
            [
              -6.538006181285084,
              53.30862916941825
            ],
            [
              -6.535378970054211,
              53.2742022393268
            ],
            [
              -6.507610791232906,
              53.262438543193156
            ],
            [
              -6.532070609305606,
              53.248754192279165
            ],
            [
              -6.370686049190766,
              53.211130512277606
            ],
            [
              -6.371505659872838,
              53.1876004130915
            ],
            [
              -6.327531518846371,
              53.18026787485951
            ],
            [
              -6.308808126679054,
              53.22127125812915
            ],
            [
              -6.242099998841809,
              53.2016591469428
            ],
            [
              -6.183547052480549,
              53.21951733934176
            ],
            [
              -6.135960401289509,
              53.1989972820914
            ],
            [
              -6.104227032761202,
              53.20979934486505
            ],
            [
              -6.111309738848632,
              53.26088675394007
            ],
            [
              -6.0923523340213706,
              53.27082073931007
            ],
            [
              -6.108158369755529,
              53.28972673336949
            ],
            [
              -6.205399631530327,
              53.31334887494853
            ],
            [
              -6.212498877826562,
              53.33601823859729
            ],
            [
              -6.177705582367736,
              53.33932364834561
            ],
            [
              -6.187989692285555,
              53.360089731723264
            ],
            [
              -6.16505395710044,
              53.35395694553057
            ],
            [
              -6.1168221642794265,
              53.38462228511011
            ],
            [
              -6.0804462131283685,
              53.36150765003103
            ],
            [
              -6.052796451049858,
              53.361030455775364
            ],
            [
              -6.045747912467164,
              53.38459533518488
            ],
            [
              -6.101816120054082,
              53.395931587792404
            ],
            [
              -6.12314639850203,
              53.44353444090942
            ],
            [
              -6.077337244129069,
              53.51998786347545
            ],
            [
              -6.1030632964269955,
              53.57509639919982
            ],
            [
              -6.2105334685298885,
              53.634508452370454
            ]
          ]]
      }
    },
    {
      type: 'Feature',
      properties: { name: 'Kildare' },
      geometry: {
        type: 'Polygon',
        coordinates: [[
            [
              -6.456115301478718,
              53.39052707817271
            ],
            [
              -6.6881464035392355,
              53.41046828249401
            ],
            [
              -6.760326012419171,
              53.43269135620284
            ],
            [
              -6.8157327389538125,
              53.39970990003863
            ],
            [
              -6.9536366271837835,
              53.44810900997837
            ],
            [
              -7.081223607470378,
              53.38281115383657
            ],
            [
              -6.974239861142507,
              53.30508647848666
            ],
            [
              -7.058029098214405,
              53.239590464196965
            ],
            [
              -7.02709525333529,
              53.20563860873
            ],
            [
              -7.161142634049185,
              53.18788201557251
            ],
            [
              -7.064487247363303,
              53.15234299763989
            ],
            [
              -7.079944131341136,
              53.11909550122351
            ],
            [
              -7.050332594292087,
              53.0517344249057
            ],
            [
              -7.090223152056126,
              53.00370698841721
            ],
            [
              -6.982000418378931,
              52.97031833034421
            ],
            [
              -6.925297280503656,
              52.88716399332597
            ],
            [
              -6.844084998887894,
              52.85843571107603
            ],
            [
              -6.73973274863144,
              52.8881221439334
            ],
            [
              -6.735885313317738,
              52.9332255244955
            ],
            [
              -6.791257675926431,
              52.98206327000034
            ],
            [
              -6.726856772571267,
              53.06574584080528
            ],
            [
              -6.620050211184179,
              53.10058972441499
            ],
            [
              -6.550589194336368,
              53.16623848090555
            ],
            [
              -6.562143444285283,
              53.18244236811745
            ],
            [
              -6.530029619809994,
              53.18937643796892
            ],
            [
              -6.51713289286576,
              53.18706597810319
            ],
            [
              -6.476018125438799,
              53.23252718247443
            ],
            [
              -6.535043158697363,
              53.247984431578345
            ],
            [
              -6.505453973106086,
              53.26184116733549
            ],
            [
              -6.534937601673903,
              53.27498558204766
            ],
            [
              -6.539921090596721,
              53.308956031543545
            ],
            [
              -6.48835754813291,
              53.336675485503974
            ],
            [
              -6.493486413422801,
              53.352081100144574
            ],
            [
              -6.456115301478718,
              53.39052707817271
            ]
          ]]
      }
    }
  ]
}

export default function MapSection() {
  const router = useRouter()

  return (
    <div className="p-6">
      <h2 className="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">Search by County</h2>
      <IrelandMap
        geojsonData={irelandGeoJson}
        onCountyClick={(county) => router.push(`/search?q=${encodeURIComponent(county)}`)}
      />
    </div>
  )
} 